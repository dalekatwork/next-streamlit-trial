(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{4007:function(e,t,a){Promise.resolve().then(a.bind(a,6537))},6537:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var i=a(7437),s=a(716),r=a(1291),n=a(1396),l=a.n(n),o=a(3278),c=a(3268);function u(e){let{data:t,labels:a}=e;const{columns:s}=a;return(0,i.jsx)("div",{className:"rounded-lg border bg-card/50",children:(0,i.jsxs)(c.iA,{children:[(0,i.jsx)(c.xD,{children:(0,i.jsxs)(c.SC,{children:[(0,i.jsx)(c.ss,{className:"w-[100px]",children:s.id}),(0,i.jsx)(c.ss,{className:"min-w-[300px]",children:s.query}),(0,i.jsx)(c.ss,{className:"min-w-[200px]",children:s.improvement}),(0,i.jsx)(c.ss,{children:s.source}),(0,i.jsx)(c.ss,{children:s.duration}),(0,i.jsx)(c.ss,{className:"text-right",children:s.rowsScanned}),(0,i.jsx)(c.ss,{className:"text-right",children:s.partitionsScanned}),(0,i.jsx)(c.ss,{className:"text-right",children:s.cost}),(0,i.jsx)(c.ss,{className:"text-right",children:s.potentialSaving})]})}),(0,i.jsx)(c.RM,{children:t.map((e=>(0,i.jsxs)(c.SC,{className:"cursor-pointer hover:bg-muted/50",children:[(0,i.jsx)(c.pj,{className:"font-medium",children:(0,i.jsx)(l(),{href:"/queries/inefficient/".concat(e.id),children:e.id})}),(0,i.jsx)(c.pj,{className:"font-mono text-xs",children:e.query}),(0,i.jsx)(c.pj,{children:(0,i.jsx)("ul",{className:"list-disc list-inside space-y-1 text-sm",children:e.improvement.map(((e,t)=>(0,i.jsx)("li",{children:e},t)))})}),(0,i.jsx)(c.pj,{children:e.source}),(0,i.jsx)(c.pj,{children:e.duration}),(0,i.jsx)(c.pj,{className:"text-right",children:e.rowsScanned.toLocaleString()}),(0,i.jsx)(c.pj,{className:"text-right",children:e.partitionsScanned}),(0,i.jsxs)(c.pj,{className:"text-right",children:["$",e.cost]}),(0,i.jsxs)(c.pj,{className:"text-right",children:[e.potentialSaving,"%"]})]},e.id)))})]})})}var d=a(341);function m(){const{labels:e,data:t}=d;return(0,i.jsxs)("div",{className:"container py-8 space-y-8",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center",children:[(0,i.jsxs)("div",{className:"space-y-1",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground hover:text-primary",children:[(0,i.jsx)(r.Z,{className:"h-4 w-4"}),(0,i.jsx)(l(),{href:"/queries",className:"text-sm",children:"Queries"})]}),(0,i.jsx)("h1",{className:"text-2xl font-semibold",children:"Inefficient Queries"})]}),(0,i.jsx)(o.DateRangePicker,{defaultValue:(0,s.Z)(new Date,"MMM dd, yyyy")})]}),(0,i.jsx)("div",{className:"space-y-8",children:(0,i.jsxs)("div",{className:"rounded-lg border bg-card p-6",children:[(0,i.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,i.jsx)("h2",{className:"text-lg font-semibold",children:"Optimizations"}),(0,i.jsx)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsx)("span",{children:"Affected Workloads:"}),(0,i.jsx)("span",{className:"font-medium text-foreground",children:"13 Visualizations"}),(0,i.jsx)("span",{children:"and"}),(0,i.jsx)("span",{className:"font-medium text-foreground",children:"9 Pipelines"})]})})]}),(0,i.jsx)(u,{data:t.queries.inefficient,labels:e.queries.inefficient})]})})]})}},3278:function(e,t,a){"use strict";a.r(t),a.d(t,{DateRangePicker:function(){return n}});var i=a(7437),s=a(3762),r=a(8203);function n(e){let{defaultValue:t}=e;return(0,i.jsxs)(s.z,{variant:"outline",className:"bg-background flex items-center gap-2",children:[(0,i.jsx)(r.Z,{className:"h-4 w-4"}),(0,i.jsx)("span",{children:t})]})}},3762:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var i=a(7437),s=a(2265),r=a(7256),n=a(9213),l=a(306);const o=(0,n.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef(((e,t)=>{let{className:a,variant:s,size:n,asChild:c=!1,...u}=e;const d=c?r.g7:"button";return(0,i.jsx)(d,{className:(0,l.cn)(o({variant:s,size:n,className:a})),ref:t,...u})}));c.displayName="Button"},3268:function(e,t,a){"use strict";a.d(t,{RM:function(){return o},SC:function(){return c},iA:function(){return n},pj:function(){return d},ss:function(){return u},xD:function(){return l}});var i=a(7437),s=a(2265),r=a(306);const n=s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("div",{className:"relative w-full overflow-auto",children:(0,i.jsx)("table",{ref:t,className:(0,r.cn)("w-full caption-bottom text-sm",a),...s})})}));n.displayName="Table";const l=s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("thead",{ref:t,className:(0,r.cn)("[&_tr]:border-b",a),...s})}));l.displayName="TableHeader";const o=s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("tbody",{ref:t,className:(0,r.cn)("[&_tr:last-child]:border-0",a),...s})}));o.displayName="TableBody";s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("tfoot",{ref:t,className:(0,r.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...s})})).displayName="TableFooter";const c=s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("tr",{ref:t,className:(0,r.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...s})}));c.displayName="TableRow";const u=s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("th",{ref:t,className:(0,r.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...s})}));u.displayName="TableHead";const d=s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("td",{ref:t,className:(0,r.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...s})}));d.displayName="TableCell";s.forwardRef(((e,t)=>{let{className:a,...s}=e;return(0,i.jsx)("caption",{ref:t,className:(0,r.cn)("mt-4 text-sm text-muted-foreground",a),...s})})).displayName="TableCaption"},306:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var i=a(7042),s=a(3986);function r(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.m)((0,i.W)(t))}},341:function(e){"use strict";e.exports=JSON.parse('{"labels":{"header":{"title":"SnowWise","navigation":{"warehouses":"Warehouses","queries":"Queries","back":"Back"}},"overview":{"warehouses":{"title":"Warehouses","variant":"indigo"},"utilization":{"title":"Utilization","variant":"purple"},"totalCost":{"title":"Total Cost","variant":"teal"},"savingPotential":{"title":"Saving Potential","variant":"rose"}},"optimizations":{"title":"Optimizations","severity":{"critical":{"label":"Critical","color":"rgb(244,63,94)"},"medium":{"label":"Medium","color":"rgb(59,130,246)"},"low":{"label":"Low","color":"rgb(16,185,129)"}},"metrics":{"actionables":"Actionables","savingPotential":"Saving Potential"}},"tables":{"workloads":{"title":"Expensive Workloads","columns":{"workload":"Workload","type":"Type","cost":"Cost","successRate":"Success Rate"},"successLabel":"Success"},"teams":{"title":"Most Expensive Teams","columns":{"team":"Team","cost":"Cost"}}},"warehouses":{"title":"Warehouse Utilization","chart":{"title":"Utilization Over Time","warehouses":{"analytics":"Analytics Platform WH","marketplace":"Marketplace WH","fulfillment":"Fulfillment WH","order":"Order Management WH"}},"actionables":{"title":"Actionables","columns":{"warehouse":"Warehouse","utilization":"Avg. Utilization","action":"Action","impact":"Impact","savings":"Saving Potential"}},"optimizations":{"title":"Optimizations","affected":"Affected Workloads:","visualizations":"Visualizations","pipelines":"Pipelines","and":"and","columns":{"pipeline":"Pipeline","warehouse":"Warehouse","action":"Action"},"actions":{"raise":"Raise PR"}}},"queries":{"overview":{"title":"Overview","totalQueries":"Total Queries","avgQueueTime":"Avg. Queue Time","failures":"Failures","savingPotential":"Saving Potential"},"optimizations":{"title":"Optimizations"},"tables":{"title":"Most Used Tables","columns":{"table":"Table","workloads":"Attached Workloads","queries":"Queries","cost":"Cost","success":"Success","failure":"Failure"}},"teams":{"title":"Most Expensive Teams","columns":{"team":"Team","cost":"Cost"}},"failures":{"columns":{"source":"Sources","reason":"Reason","occurrences":"Occurences","type":"Type","cost":"Cost (USD)","action":"Action"},"actions":{"fix":"Fix Query","raise":"Raise PR"}},"inefficient":{"columns":{"id":"Query ID","query":"Query Text","improvement":"Improvement","source":"Source","duration":"Avg. Duration","rowsScanned":"Avg. Rows Scanned","partitionsScanned":"Avg. Partition Scanned","cost":"Cost (USD)","potentialSaving":"Potential Saving (%)"}}}},"data":{"overview":{"warehouses":4,"utilization":38.3,"totalCost":79913,"savingPotential":13195},"optimizations":[{"id":1,"title":"Missing Table Clusters","severity":"Critical","actionables":13,"savingPotential":2436},{"id":2,"title":"Underutilized Warehouse","severity":"Critical","actionables":2,"savingPotential":3781},{"id":3,"title":"Enable Autoscaling","severity":"Critical","actionables":1,"savingPotential":1904},{"id":4,"title":"Resolve Memory Issues","severity":"Critical","actionables":3,"savingPotential":2347},{"id":5,"title":"Warehouse Caching","severity":"Medium","actionables":2,"savingPotential":1198},{"id":6,"title":"Unused Tables","severity":"Low","actionables":21,"savingPotential":1529}],"expensiveWorkloads":[{"workload":"Pricing Updates","type":"Pipeline","cost":7291,"success":75,"failure":25},{"workload":"Search Re-hashing","type":"Pipeline","cost":3989,"success":15,"failure":85},{"workload":"Inventory Listings","type":"Pipeline","cost":6371,"success":45,"failure":55},{"workload":"Delivery Congestions - Live","type":"Visualization","cost":5218,"success":60,"failure":40},{"workload":"Order Fulfillment","type":"Pipeline","cost":4927,"success":80,"failure":20}],"expensiveTeams":[{"team":"Fulfillment Team","cost":9312},{"team":"Analytics Platform","cost":7291},{"team":"Promotions","cost":6371},{"team":"Marketplace Commerce","cost":5218},{"team":"Vendor Management","cost":4927}],"queries":{"overview":{"totalQueries":37890,"avgQueueTime":"00:01:59","failures":4927,"savingPotential":8368},"optimizations":[{"id":1,"title":"Recurring Expensive Failures","severity":"Critical","actionables":19,"savingPotential":3126},{"id":2,"title":"Queued Queries","severity":"Critical","actionables":49,"savingPotential":1876},{"id":3,"title":"Query Acceleration","severity":"Medium","actionables":31,"savingPotential":2981},{"id":4,"title":"Inefficient Queries","severity":"Medium","actionables":14,"savingPotential":1903},{"id":5,"title":"Long Running Queries","severity":"Medium","actionables":23,"savingPotential":3912},{"id":6,"title":"Adhoc Expensive Queries","severity":"Low","actionables":9,"savingPotential":2019}],"tables":[{"table":"tracker.geolocation_status","workloads":18,"queries":1748,"cost":7291,"success":75,"failure":25},{"table":"promotions.apparels_pricing","workloads":16,"queries":566,"cost":3989,"success":15,"failure":85},{"table":"security.infrastructure_scans","workloads":15,"queries":1330,"cost":6371,"success":45,"failure":55},{"table":"frauds.payment_frauds","workloads":17,"queries":969,"cost":5218,"success":60,"failure":40}],"teams":[{"team":"People Productivity","cost":3945},{"team":"Pricing Analysis","cost":3629},{"team":"Invoice Reconcilation","cost":3211},{"team":"Analytics Platform","cost":3091}],"inefficient":[{"id":"987654","query":"SELECT customers.customer_name, orders.order_date, line_items.product_name, line_items.quantity, line_items.unit_price FROM customers INNER JOIN orders ON","improvement":["Avoid using \'*\' in SELECT","Optimize date range filtering","Use appropriate indexing for faster query execution"],"source":"Looker Dashboard","duration":"24s","rowsScanned":650000,"partitionsScanned":250,"cost":168,"potentialSaving":20},{"id":"981726","query":"SELECT invoices.invoice_number, customers.customer_name, products.product_name, line_items.quantity FROM invoices INNER","improvement":["Index columns used in JOIN and WHERE clauses","Optimize date range filtering","Avoid unnecessary JOINs"],"source":"Looker Dashboard","duration":"25s","rowsScanned":600000,"partitionsScanned":200,"cost":211,"potentialSaving":25},{"id":"963852","query":"SELECT employees.employee_name, departments.department_name, salaries.salary_amount FROM employees INNER JOIN salaries ON","improvement":["Ensure proper indexing","Use appropriate data types for comparisons","Optimize WHERE clause conditions"],"source":"Pipeline","duration":"28s","rowsScanned":750000,"partitionsScanned":320,"cost":203,"potentialSaving":23},{"id":"789123","query":"SELECT products.product_name, orders.order_date, customers.customer_name, suppliers.supplier_name FROM products INNER JOIN order_details ON","improvement":["Ensure proper indexing","Optimize JOIN conditions","Use specific WHERE conditions for filtering"],"source":"Pipeline","duration":"32s","rowsScanned":850000,"partitionsScanned":350,"cost":108,"potentialSaving":26}],"failures":{"executions":[{"date":"2024-04-28","order":4000,"marketplace":3500,"analytics":2500,"fulfillment":3000},{"date":"2024-04-29","order":4500,"marketplace":3000,"analytics":3500,"fulfillment":2500},{"date":"2024-04-30","order":3500,"marketplace":4000,"analytics":2000,"fulfillment":3500},{"date":"2024-05-01","order":3000,"marketplace":3500,"analytics":4000,"fulfillment":2000},{"date":"2024-05-02","order":4500,"marketplace":2500,"analytics":3000,"fulfillment":3500},{"date":"2024-05-03","order":3500,"marketplace":3000,"analytics":3500,"fulfillment":2500},{"date":"2024-05-04","order":4000,"marketplace":3500,"analytics":2500,"fulfillment":3000},{"date":"2024-05-05","order":3000,"marketplace":4000,"analytics":3000,"fulfillment":2500},{"date":"2024-05-06","order":3500,"marketplace":3000,"analytics":3500,"fulfillment":2000},{"date":"2024-05-07","order":4000,"marketplace":2500,"analytics":3000,"fulfillment":3500},{"date":"2024-05-08","order":3500,"marketplace":3000,"analytics":2500,"fulfillment":3000},{"date":"2024-05-09","order":3000,"marketplace":3500,"analytics":3000,"fulfillment":2500},{"date":"2024-05-10","order":4500,"marketplace":2500,"analytics":3500,"fulfillment":2000},{"date":"2024-05-11","order":3500,"marketplace":3000,"analytics":2500,"fulfillment":3500},{"date":"2024-05-12","order":4000,"marketplace":2500,"analytics":3000,"fulfillment":2500},{"date":"2024-05-13","order":3500,"marketplace":3000,"analytics":2500,"fulfillment":3000}],"items":[{"source":"Vendors reviews","reason":"Inefficient SQL Queries","occurrences":42,"type":"Visualization","cost":400,"action":"fix"},{"source":"Teams security threats","reason":"Disk spilling","occurrences":50,"type":"Visualization","cost":350,"action":"fix"},{"source":"Team productivity analytics","reason":"Query Timeout","occurrences":40,"type":"Pipeline","cost":350,"action":"raise"},{"source":"Recruitments expenses","reason":"Snowflake Query Queuing","occurrences":143,"type":"Visualization","cost":800,"action":"fix"},{"source":"Reconcile returned orders","reason":"Queries stuck in the queue","occurrences":77,"type":"Pipeline","cost":350,"action":"raise"},{"source":"Re-hashing product index","reason":"Concurrency Issues","occurrences":94,"type":"Pipeline","cost":500,"action":"raise"},{"source":"Re-hash vendor ratings","reason":"Ineffective caching","occurrences":102,"type":"Pipeline","cost":300,"action":"raise"},{"source":"Quaterly finance updates","reason":"Issues with joins","occurrences":148,"type":"Visualization","cost":400,"action":"fix"}],"reasons":[{"name":"Inefficient memory allocation","value":23.5},{"name":"Lack of proper indexing","value":11.8},{"name":"Data Transfer Limits Exceeded","value":9.4},{"name":"Insufficient Warehouse Size","value":5.9},{"name":"Query Timeout","value":5.3},{"name":"Ineffective caching","value":4.1},{"name":"Concurrency Issues","value":4.1},{"name":"Inefficient SQL Queries","value":11.8},{"name":"Issues with joins","value":4.1},{"name":"Others","value":25.9}],"sources":[{"name":"Clickstream ingestion","value":19.8},{"name":"Order traffic congestion","value":5},{"name":"Recruitments expenses","value":5},{"name":"Dropped orders analysis","value":33.2},{"name":"Aggregate dropped payments","value":5.9},{"name":"Aggregate memberships","value":4.9},{"name":"Re-hashing product index","value":7.9},{"name":"Product ingestions","value":5},{"name":"Quaterly finance updates","value":5},{"name":"Others","value":8.3}]}},"warehouses":{"utilization":[{"date":"2024-04-28","analytics":65,"marketplace":55,"fulfillment":45,"order":35},{"date":"2024-04-29","analytics":70,"marketplace":60,"fulfillment":80,"order":45},{"date":"2024-04-30","analytics":60,"marketplace":50,"fulfillment":70,"order":90},{"date":"2024-05-01","analytics":55,"marketplace":45,"fulfillment":35,"order":25},{"date":"2024-05-02","analytics":45,"marketplace":35,"fulfillment":25,"order":85},{"date":"2024-05-03","analytics":50,"marketplace":40,"fulfillment":90,"order":35},{"date":"2024-05-04","analytics":65,"marketplace":45,"fulfillment":75,"order":55},{"date":"2024-05-05","analytics":40,"marketplace":80,"fulfillment":60,"order":25},{"date":"2024-05-06","analytics":55,"marketplace":45,"fulfillment":35,"order":55},{"date":"2024-05-07","analytics":70,"marketplace":30,"fulfillment":85,"order":45},{"date":"2024-05-08","analytics":75,"marketplace":45,"fulfillment":65,"order":35},{"date":"2024-05-09","analytics":60,"marketplace":55,"fulfillment":75,"order":25},{"date":"2024-05-10","analytics":50,"marketplace":45,"fulfillment":85,"order":35},{"date":"2024-05-11","analytics":45,"marketplace":35,"fulfillment":65,"order":35},{"date":"2024-05-12","analytics":55,"marketplace":45,"fulfillment":55,"order":25},{"date":"2024-05-13","analytics":65,"marketplace":55,"fulfillment":45,"order":35}],"actionables":[{"warehouse":"Order Management WH","utilization":51.1,"actions":["Downsize from X-Large to Small","Use single cluster instead of multi-cluster configuration"],"impacts":["Warehouse can execute more queries with reduced idle time","Downsized warehouse will cost 12% lesser"],"savingPotential":1700},{"warehouse":"Marketplace WH","utilization":47.6,"actions":["Downsize from 2X-Large to Medium","Increase MAX_CONCURRENCY_LEVEL to 14","Set AUTO_SUSPEND=300"],"impacts":["Warehouse can execute more queries with reduced idle time","Downsized warehouse will cost 12% lesser"],"savingPotential":2079}],"optimizations":{"visualizations":13,"pipelines":9,"items":[{"pipeline":"Daily Invoice Recognition","warehouse":"Order Management","action":"raise"},{"pipeline":"Vendor Review Updates","warehouse":"Marketplace","action":"raise"}]}}}}')}},function(e){e.O(0,[630,542,971,596,744],(function(){return t=4007,e(e.s=t);var t}));var t=e.O();_N_E=t}]);